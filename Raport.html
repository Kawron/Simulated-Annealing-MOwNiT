<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Karol Wrona Laboratorium4</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.13.24"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

/* From extension koehlma.markdown-math */
@font-face{font-family:KaTeX_AMS;src:url(fonts/KaTeX_AMS-Regular.eot);src:url(fonts/KaTeX_AMS-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_AMS-Regular.woff2) format('woff2'),url(fonts/KaTeX_AMS-Regular.woff) format('woff'),url(fonts/KaTeX_AMS-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url(fonts/KaTeX_Caligraphic-Bold.eot);src:url(fonts/KaTeX_Caligraphic-Bold.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Caligraphic-Bold.woff2) format('woff2'),url(fonts/KaTeX_Caligraphic-Bold.woff) format('woff'),url(fonts/KaTeX_Caligraphic-Bold.ttf) format('ttf');font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url(fonts/KaTeX_Caligraphic-Regular.eot);src:url(fonts/KaTeX_Caligraphic-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Caligraphic-Regular.woff2) format('woff2'),url(fonts/KaTeX_Caligraphic-Regular.woff) format('woff'),url(fonts/KaTeX_Caligraphic-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url(fonts/KaTeX_Fraktur-Bold.eot);src:url(fonts/KaTeX_Fraktur-Bold.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Fraktur-Bold.woff2) format('woff2'),url(fonts/KaTeX_Fraktur-Bold.woff) format('woff'),url(fonts/KaTeX_Fraktur-Bold.ttf) format('ttf');font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url(fonts/KaTeX_Fraktur-Regular.eot);src:url(fonts/KaTeX_Fraktur-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Fraktur-Regular.woff2) format('woff2'),url(fonts/KaTeX_Fraktur-Regular.woff) format('woff'),url(fonts/KaTeX_Fraktur-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Bold.eot);src:url(fonts/KaTeX_Main-Bold.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Main-Bold.woff2) format('woff2'),url(fonts/KaTeX_Main-Bold.woff) format('woff'),url(fonts/KaTeX_Main-Bold.ttf) format('ttf');font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Italic.eot);src:url(fonts/KaTeX_Main-Italic.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Main-Italic.woff2) format('woff2'),url(fonts/KaTeX_Main-Italic.woff) format('woff'),url(fonts/KaTeX_Main-Italic.ttf) format('ttf');font-weight:400;font-style:italic}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Regular.eot);src:url(fonts/KaTeX_Main-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Main-Regular.woff2) format('woff2'),url(fonts/KaTeX_Main-Regular.woff) format('woff'),url(fonts/KaTeX_Main-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Math;src:url(fonts/KaTeX_Math-Italic.eot);src:url(fonts/KaTeX_Math-Italic.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Math-Italic.woff2) format('woff2'),url(fonts/KaTeX_Math-Italic.woff) format('woff'),url(fonts/KaTeX_Math-Italic.ttf) format('ttf');font-weight:400;font-style:italic}@font-face{font-family:KaTeX_SansSerif;src:url(fonts/KaTeX_SansSerif-Regular.eot);src:url(fonts/KaTeX_SansSerif-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_SansSerif-Regular.woff2) format('woff2'),url(fonts/KaTeX_SansSerif-Regular.woff) format('woff'),url(fonts/KaTeX_SansSerif-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Script;src:url(fonts/KaTeX_Script-Regular.eot);src:url(fonts/KaTeX_Script-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Script-Regular.woff2) format('woff2'),url(fonts/KaTeX_Script-Regular.woff) format('woff'),url(fonts/KaTeX_Script-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size1;src:url(fonts/KaTeX_Size1-Regular.eot);src:url(fonts/KaTeX_Size1-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Size1-Regular.woff2) format('woff2'),url(fonts/KaTeX_Size1-Regular.woff) format('woff'),url(fonts/KaTeX_Size1-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size2;src:url(fonts/KaTeX_Size2-Regular.eot);src:url(fonts/KaTeX_Size2-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Size2-Regular.woff2) format('woff2'),url(fonts/KaTeX_Size2-Regular.woff) format('woff'),url(fonts/KaTeX_Size2-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size3;src:url(fonts/KaTeX_Size3-Regular.eot);src:url(fonts/KaTeX_Size3-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Size3-Regular.woff2) format('woff2'),url(fonts/KaTeX_Size3-Regular.woff) format('woff'),url(fonts/KaTeX_Size3-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size4;src:url(fonts/KaTeX_Size4-Regular.eot);src:url(fonts/KaTeX_Size4-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Size4-Regular.woff2) format('woff2'),url(fonts/KaTeX_Size4-Regular.woff) format('woff'),url(fonts/KaTeX_Size4-Regular.ttf) format('ttf');font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Typewriter;src:url(fonts/KaTeX_Typewriter-Regular.eot);src:url(fonts/KaTeX_Typewriter-Regular.eot#iefix) format('embedded-opentype'),url(fonts/KaTeX_Typewriter-Regular.woff2) format('woff2'),url(fonts/KaTeX_Typewriter-Regular.woff) format('woff'),url(fonts/KaTeX_Typewriter-Regular.ttf) format('ttf');font-weight:400;font-style:normal}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:inline-block;text-align:initial}.katex{font:400 1.21em KaTeX_Main;line-height:1.2;white-space:nowrap;text-indent:0}.katex .katex-html{display:inline-block}.katex .katex-mathml{position:absolute;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}.katex .base,.katex .strut{display:inline-block}.katex .mathit{font-family:KaTeX_Math;font-style:italic}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .amsrm,.katex .mathbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr{font-family:KaTeX_Script}.katex .mathsf{font-family:KaTeX_SansSerif}.katex .mainit{font-family:KaTeX_Main;font-style:italic}.katex .textstyle>.mord+.mop{margin-left:.16667em}.katex .textstyle>.mord+.mbin{margin-left:.22222em}.katex .textstyle>.mord+.mrel{margin-left:.27778em}.katex .textstyle>.mop+.mop,.katex .textstyle>.mop+.mord,.katex .textstyle>.mord+.minner{margin-left:.16667em}.katex .textstyle>.mop+.mrel{margin-left:.27778em}.katex .textstyle>.mop+.minner{margin-left:.16667em}.katex .textstyle>.mbin+.minner,.katex .textstyle>.mbin+.mop,.katex .textstyle>.mbin+.mopen,.katex .textstyle>.mbin+.mord{margin-left:.22222em}.katex .textstyle>.mrel+.minner,.katex .textstyle>.mrel+.mop,.katex .textstyle>.mrel+.mopen,.katex .textstyle>.mrel+.mord{margin-left:.27778em}.katex .textstyle>.mclose+.mop{margin-left:.16667em}.katex .textstyle>.mclose+.mbin{margin-left:.22222em}.katex .textstyle>.mclose+.mrel{margin-left:.27778em}.katex .textstyle>.mclose+.minner,.katex .textstyle>.minner+.mop,.katex .textstyle>.minner+.mord,.katex .textstyle>.mpunct+.mclose,.katex .textstyle>.mpunct+.minner,.katex .textstyle>.mpunct+.mop,.katex .textstyle>.mpunct+.mopen,.katex .textstyle>.mpunct+.mord,.katex .textstyle>.mpunct+.mpunct,.katex .textstyle>.mpunct+.mrel{margin-left:.16667em}.katex .textstyle>.minner+.mbin{margin-left:.22222em}.katex .textstyle>.minner+.mrel{margin-left:.27778em}.katex .mclose+.mop,.katex .minner+.mop,.katex .mop+.mop,.katex .mop+.mord,.katex .mord+.mop,.katex .textstyle>.minner+.minner,.katex .textstyle>.minner+.mopen,.katex .textstyle>.minner+.mpunct{margin-left:.16667em}.katex .reset-textstyle.textstyle{font-size:1em}.katex .reset-textstyle.scriptstyle{font-size:.7em}.katex .reset-textstyle.scriptscriptstyle{font-size:.5em}.katex .reset-scriptstyle.textstyle{font-size:1.42857em}.katex .reset-scriptstyle.scriptstyle{font-size:1em}.katex .reset-scriptstyle.scriptscriptstyle{font-size:.71429em}.katex .reset-scriptscriptstyle.textstyle{font-size:2em}.katex .reset-scriptscriptstyle.scriptstyle{font-size:1.4em}.katex .reset-scriptscriptstyle.scriptscriptstyle{font-size:1em}.katex .style-wrap{position:relative}.katex .vlist{display:inline-block}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist .baseline-fix{display:inline-table;table-layout:fixed}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{width:100%}.katex .mfrac .frac-line:before{border-bottom-style:solid;border-bottom-width:1px;content:"";display:block}.katex .mfrac .frac-line:after{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block;margin-top:-1px}.katex .mspace{display:inline-block}.katex .mspace.negativethinspace{margin-left:-.16667em}.katex .mspace.thinspace{width:.16667em}.katex .mspace.mediumspace{width:.22222em}.katex .mspace.thickspace{width:.27778em}.katex .mspace.enspace{width:.5em}.katex .mspace.quad{width:1em}.katex .mspace.qquad{width:2em}.katex .llap,.katex .rlap{width:0;position:relative}.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .rlap>.inner{left:0}.katex .katex-logo .a{font-size:.75em;margin-left:-.32em;position:relative;top:-.2em}.katex .katex-logo .t{margin-left:-.23em}.katex .katex-logo .e{margin-left:-.1667em;position:relative;top:.2155em}.katex .katex-logo .x{margin-left:-.125em}.katex .rule{display:inline-block;border:0 solid;position:relative}.katex .overline .overline-line,.katex .underline .underline-line{width:100%}.katex .overline .overline-line:before,.katex .underline .underline-line:before{border-bottom-style:solid;border-bottom-width:1px;content:"";display:block}.katex .overline .overline-line:after,.katex .underline .underline-line:after{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block;margin-top:-1px}.katex .sqrt>.sqrt-sign{position:relative}.katex .sqrt .sqrt-line{width:100%}.katex .sqrt .sqrt-line:before{border-bottom-style:solid;border-bottom-width:1px;content:"";display:block}.katex .sqrt .sqrt-line:after{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block;margin-top:-1px}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer,.katex .sizing{display:inline-block}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:2em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:3.46em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:4.14em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.98em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.47142857em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.95714286em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.55714286em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.875em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.125em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.25em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.5em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.8em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.1625em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.5875em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:3.1125em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.77777778em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.88888889em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.6em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.92222222em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.3em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.76666667em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.7em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.8em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.9em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.2em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.44em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.73em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:2.07em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.49em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.58333333em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.66666667em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.75em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.83333333em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44166667em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.725em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.075em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.48611111em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.55555556em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.625em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.69444444em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.20138889em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.4375em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72916667em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.28901734em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.40462428em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.46242775em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.52023121em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.57803468em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69364162em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83236994em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.19653179em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.43930636em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.24154589em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.33816425em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.38647343em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.43478261em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.48309179em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.57971014em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69565217em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83574879em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20289855em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.20080321em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.2811245em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.32128514em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.36144578em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.40160643em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48192771em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57831325em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69477912em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.8313253em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist>span,.katex .op-limits>.vlist>span{text-align:center}.katex .accent .accent-body>span{width:0}.katex .accent .accent-body.accent-vec>span{position:relative;left:.326em}.katex .mtable .vertical-separator{display:inline-block;margin:0 -.025em;border-right:.05em solid #000}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist{text-align:center}.katex .mtable .col-align-l>.vlist{text-align:left}.katex .mtable .col-align-r>.vlist{text-align:right}
</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        
        
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="karol-wrona-laboratorium4">Karol Wrona Laboratorium4</h1>
<link href="style.css" rel="stylesheet"></link>
<ul>
<li><a href="#karol-wrona-laboratorium4">Karol Wrona Laboratorium4</a>
<ul>
<li><a href="#simulated-annealig">Simulated Annealig</a>
<ul>
<li><a href="#wst%C4%99p-teoretyczny">Wstęp teoretyczny</a></li>
<li><a href="#wst%C4%99p-do-kodu-%C5%BAr%C3%B3d%C5%82owego-g%C5%82%C3%B3wne-za%C5%82o%C5%BCenia">Wstęp do kodu źródłowego, główne założenia</a></li>
<li><a href="#kod">Kod</a></li>
</ul>
</li>
<li><a href="#zad-1">Zad 1</a>
<ul>
<li><a href="#generowanie-miast">Generowanie miast</a></li>
<li><a href="#salesmannode">SalesmanNode</a></li>
<li><a href="#generowanie-gif">Generowanie Gif</a></li>
<li><a href="#multiprocessing">Multiprocessing</a></li>
</ul>
</li>
<li><a href="#wyniki-zad1">Wyniki Zad1</a>
<ul>
<li><a href="#unifrom-distribution">Unifrom distribution:</a></li>
<li><a href="#normal-distribution">Normal distribution:</a></li>
<li><a href="#nine-spereted-areas">Nine spereted areas:</a></li>
<li><a href="#wnioski">Wnioski</a></li>
</ul>
</li>
<li><a href="#zad-2">Zad 2</a>
<ul>
<li><a href="#binarynode">BinaryNode</a></li>
<li><a href="#colornode">ColorNode</a></li>
<li><a href="#smoothcolornode">SmoothColorNode</a></li>
<li><a href="#tworzenie-gif%C3%B3w">Tworzenie Gifów</a></li>
<li><a href="#klasa-main">Klasa Main</a></li>
</ul>
</li>
<li><a href="#wyniki-zad2">Wyniki Zad2</a>
<ul>
<li><a href="#simple-square">Simple Square:</a></li>
<li><a href="#cross">Cross:</a></li>
<li><a href="#horns">Horns:</a></li>
<li><a href="#checkerboard">Checkerboard:</a></li>
<li><a href="#random">Random:</a></li>
<li><a href="#ring">Ring:</a></li>
<li><a href="#skos">Skos:</a></li>
<li><a href="#big-ring">Big Ring:</a></li>
<li><a href="#cross-with-spaces">Cross with spaces:</a></li>
<li><a href="#wnioski-obrazy-czarno-bia%C5%82e">Wnioski obrazy czarno-białe</a></li>
<li><a href="#rgb-repel">RGB Repel:</a></li>
<li><a href="#green-random">Green Random:</a></li>
<li><a href="#red-square">Red Square:</a></li>
<li><a href="#red-ring">Red ring:</a></li>
<li><a href="#red-column">Red column:</a></li>
<li><a href="#blue-random">Blue random:</a></li>
<li><a href="#blue-horn">Blue Horn:</a></li>
<li><a href="#wnioski-obrazy-rgb">Wnioski obrazy RGB</a></li>
</ul>
</li>
<li><a href="#zad3">Zad3</a>
<ul>
<li><a href="#klasa-sudoku">Klasa Sudoku</a></li>
</ul>
</li>
<li><a href="#wyniki-zad-3">Wyniki zad 3</a>
<ul>
<li><a href="#sudoku-nr-1">Sudoku nr 1</a></li>
<li><a href="#sudoku-nr-2">Sudoku nr 2</a></li>
<li><a href="#sudoku-nr-3">Sudoku nr 3</a></li>
<li><a href="#wnioski-zad3">Wnioski Zad3</a></li>
</ul>
</li>
<li><a href="#program-upscaler">Program upscaler</a></li>
</ul>
</li>
</ul>
<p>Cały kod znajduje się w osobnych plikach, wymagane bibloteki znajdują się w pliku <em>requirements.txt</em>. Do uruchomienia kodu wymagana jest wersja Pythona 3.10 lub wyższa.</p>
<h2 id="simulated-annealig">Simulated Annealig</h2>
<h3 id="wstęp-teoretyczny">Wstęp teoretyczny</h3>
<p>Simulated annealing (symulowane wyżarzanie) jest algorytmem heurestycznym znajdującym minimum lub maximum danej funkcji. Jego nazwa wywodzi się z jego podobieństwa do zjawiska wyżarzania w metalurgi.
W algorytmie kluczową rolę odgrywa paramater zwany temperaturą, który opisuję z jakim prawdopodobieństwiem będziemy akceptować nieoptymalne wartości funkcji. Pozwala nam to uniknąć &quot;utknięcia&quot; w optimum lokalnym funkcji. Wartość temperatury spada z kolejnymi iteracjami, co oznacza, że im dłużej algorytm pracuje tym mniej chętni jesteśmy do akceptowania nieoptymalnych wartości.</p>
<h3 id="wstęp-do-kodu-źródłowego-główne-założenia">Wstęp do kodu źródłowego, główne założenia</h3>
<p>Pochodząc do zadania zdecydowałem, że chciałbym napisać kod w taki sposób, aby dla wszystkich trzech zadań móc korzystać z jednej i tej samej implementacji algorytmu. Dlatego zdecydowałem się skorzystać z filozofi programowania obiektowego. Funkcja implementująca algorytm, poza róźnymi paramatrami przyjmuje obiekt klasy <em>Node</em>. W ten sposób trzy różne zadania sprowadzają sie do stoworzenia trzech róznych klas, bez potrzeby modyfikowania samego algorytmu dla każdego z nich.</p>
<p>Tak wygląda klasa <em>Node</em></p>
<pre><code class="language-Python"><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span>(<span class="hljs-params">ABC</span>):</span>

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">pass</span>

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getEnergy</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">pass</span>

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">neighbour</span>(<span class="hljs-params">self, temp</span>):</span>
        <span class="hljs-keyword">pass</span>

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">acceptState</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">pass</span>

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">prevState</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">pass</span>

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">screenShot</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">pass</span>

<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newStartPoint</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">pass</span>
</div></code></pre>
<p>Opis metod:</p>
<ul>
<li>getEnergy: zwraca energie układu</li>
<li>neighbour: generuje stan sąsiedni</li>
<li>acceptState: akceptuje stan sąsiedni jako nowy stan</li>
<li>prevState: odrzuca stan sąsiedni</li>
<li>screenShot: tworzy kopie węzła aby śledzić działanie programu</li>
<li>newStartPoint: tworzy nowy węzeł z innym stanem początkowym</li>
</ul>
<p>Początkowo zamiast metod acceptState i prevState zwracałem nowy obiekt tej samej klasy, jednak w przypadku
zadania drugiego, przepisywanie całej macierzy przy każdej iteracji było zbyt kosztowne a więc musiałem wprowadzić pewne optymalizacje, które zostaną dokładnie opisane w dalszej częsci raportu.</p>
<h3 id="kod">Kod</h3>
<pre><code class="language-Python"><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">calcTemperature</span>(<span class="hljs-params">startTemp, time, alfa, timeFactor</span>):</span>
    Tk = startTemp*(alfa**(time/timeFactor))
    <span class="hljs-keyword">return</span> Tk

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">previewSlope</span>(<span class="hljs-params">iterations, startTemp, alfa, timeFactor</span>):</span>
    timeArr = []
    tempArr = []
    <span class="hljs-keyword">for</span> time <span class="hljs-keyword">in</span> range(iterations):
        timeArr.append(time)
        tempArr.append(calcTemperature(startTemp, time, alfa, timeFactor))
    plt.plot(timeArr, tempArr)
    plt.show()

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">runSimulations</span>(<span class="hljs-params">startingNode, numOfRestarts, startTemp, alfa=<span class="hljs-number">0.9</span>, timeFactor=<span class="hljs-number">500</span>, probFactor=<span class="hljs-number">100</span>, maxIteration=<span class="hljs-number">1e4</span>, directory = <span class="hljs-string">&quot;&quot;</span></span>):</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">probability</span>(<span class="hljs-params">temp, e1, e2, probFactor</span>):</span>
        <span class="hljs-keyword">if</span> e2 &lt; e1: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> math.exp(-(abs(e2-e1))/(temp*probFactor))

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">simulatedAnnealing</span>(<span class="hljs-params">startTemp, startingNode, alfa, timeFactor, probFactor, maxIteration</span>):</span>
        <span class="hljs-comment"># used to display plot about cooling rate and energy levels</span>
        timeArr = []
        tempArr = []
        energyArr=[]
        resArray = []
        
        time = <span class="hljs-number">0</span>
        temp = startTemp
        node = startingNode
        mini = float(<span class="hljs-string">&#x27;inf&#x27;</span>)
        percentage = <span class="hljs-number">0</span>
        <span class="hljs-keyword">while</span> time &lt; maxIteration:
            temp = calcTemperature(startTemp, time, alfa, timeFactor)
            timeArr.append(time)
            tempArr.append(temp)

            e1 = node.getEnergy()
            node.neighbour(temp)
            e2 = node.getEnergy()
            prob = probability(temp, e1, e2, probFactor)
            
            <span class="hljs-keyword">if</span> prob &gt; random.random():
                node.acceptState()
            <span class="hljs-keyword">else</span>:
                node.prevState()
            time += <span class="hljs-number">1</span>
            energyArr.append(node.getEnergy())
            
            <span class="hljs-keyword">if</span> time % (maxIteration//<span class="hljs-number">126</span>) == <span class="hljs-number">0</span>:
                resArray.append(node.screenShot())
            <span class="hljs-keyword">if</span> time % (maxIteration//<span class="hljs-number">100</span>) == <span class="hljs-number">0</span>:
                percentage += <span class="hljs-number">1</span>
                mini = min(mini, node.getEnergy())
                print(<span class="hljs-string">f&quot;done: <span class="hljs-subst">{percentage}</span>%, temp: <span class="hljs-subst">{temp}</span>: energy: <span class="hljs-subst">{node.getEnergy()}</span> dif: <span class="hljs-subst">{e1-e2}</span>, prob: <span class="hljs-subst">{prob}</span>, time: <span class="hljs-subst">{time}</span>&quot;</span>)
        resArray.append(node.screenShot())

        fig, axs = plt.subplots(<span class="hljs-number">2</span>)
        axs[<span class="hljs-number">0</span>].plot(timeArr, tempArr)
        axs[<span class="hljs-number">1</span>].plot(timeArr, energyArr)
        plt.savefig(directory + <span class="hljs-string">&quot;/&quot;</span> + <span class="hljs-string">&quot;plot.png&quot;</span>)
        <span class="hljs-keyword">return</span> resArray, node.getEnergy()

    results = []
    bestIteration = <span class="hljs-number">-1</span>
    mini = float(<span class="hljs-string">&quot;inf&quot;</span>)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(numOfRestarts):
        startingNode = startingNode.newStartPoint()
        resArray, res = simulatedAnnealing(startTemp, startingNode, alfa, timeFactor, probFactor, maxIteration)
        <span class="hljs-keyword">if</span> res &lt; mini:
            mini = res
            bestIteration = i
        results.append(resArray)
    print(<span class="hljs-string">f&quot;best res: <span class="hljs-subst">{mini}</span>&quot;</span>)
    <span class="hljs-keyword">return</span> results[bestIteration], mini
</div></code></pre>
<p>Główną funkcją jest runSimulations(). Poza oczywistymi argumentami takimi jak startingNode lub numOfRestarts, przyjmuję także kilka parametrów służących do sterowania spadkiem temperatury, a także wartości prawdopodobieństwa. Funkcja spadku temperatury dana jest równaniem Tk = startTemp*(alfa^(time/timeFactor)). Pozwala ona na uzyskanie wykresu który daje dobre wyniki oraz zarazem pozwala na dokładne sterowanie spadkiem temperatury np. gdy zwiększamy ilość iteracji musimy także zwiększyć timeFactor, aby temperatura nie spadła zbyt szybko.</p>
<p>Wartość prawdopodonieństwa zależy od róznicy energi układów, która może przyjmować wartości róznych rzędów wielkości dla różnych zadań. Przydatny jest więc argument probFactor, który pozwala na modyfikowanie wartości prawdopodobieństwa. Funkcja prawdopodobieństwa opisana jest wzorem: P = e^(-(abs(e2-e1))/(temp*probFactor)) dla e2 &gt; e1 oraz P = 1 wpp. Wartość bezwzględna pozwala także na rozwiązanie układów z ujemną energią.</p>
<p>Domyślne argumenty zostały wyznaczone eksperymentalnie, i nie dają dobrych wyników dla każdego typu zadania a więc trzeba zawsze ręcznie dopasować te wartości dla każdego zadania. Przydatna do tego jest funkcją previewSlope(), która pozwala na wyświetlenie jak będzie wyglądał spadek temperatury dla danych ustawień.</p>
<p>Co do głównej części algorytmu to działa on w następujący sposób:</p>
<ul>
<li>liczymy energie układu</li>
<li>generujemy stan sąsiedni (stan sąsiedni jest teraz obecnym stanem)</li>
<li>liczymy energie stanu sąsiedniego</li>
<li>decydujemy czy zaakceptować stan (acceptState) czy wrócić do poprzedniego (prevState)</li>
</ul>
<p>Główna funkcja śledzi także na bieżąco wartości temperatury oraz energi układu, generuje 126 &quot;screenshotów&quot; co pozwala na wygenerowanie 126-klatkowego gifa, oraz informuje ile postępu zostało już wykonane.</p>
<p>Jeśli numOfRestarts wynosiło więcej niż 1 to na koniec porównujemy uzyskane wyniki i zwracamy najlepszy.</p>
<h2 id="zad-1">Zad 1</h2>
<p>Problem komiwojażera</p>
<h3 id="generowanie-miast">Generowanie miast</h3>
<pre><code class="language-Python"><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generateUni</span>(<span class="hljs-params">n, width, height</span>):</span>
    points = []
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(n):
        x = random.random() * width
        y = random.random() * height
        points.append((x,y))
    <span class="hljs-keyword">return</span> points

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generateNorm</span>(<span class="hljs-params">n, loc, mean</span>):</span>
    points = []
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(n):
        x = random.normalvariate(loc, mean)
        y = random.normalvariate(loc, mean)
        points.append((x,y))
    <span class="hljs-keyword">return</span> points

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generateSeperated</span>(<span class="hljs-params">n, width, height</span>):</span>
    points = []
    sixthWidth = width/<span class="hljs-number">9</span>
    sixthHeight = height/<span class="hljs-number">9</span>
    groupSize = math.ceil(n/<span class="hljs-number">9</span>)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>,<span class="hljs-number">9</span>,<span class="hljs-number">3</span>):
        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>,<span class="hljs-number">9</span>,<span class="hljs-number">3</span>):
            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(groupSize):
                x = (random.random() + i) * sixthWidth
                y = (random.random() + j) * sixthHeight
                points.append((x,y))
    <span class="hljs-keyword">return</span> points

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">seperateList</span>(<span class="hljs-params">points</span>):</span>
    xs = [pair[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> points]
    ys = [pair[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> points]
    <span class="hljs-keyword">return</span> xs, ys
</div></code></pre>
<h3 id="salesmannode">SalesmanNode</h3>
<pre><code class="language-Python"><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SalesmanNode</span>(<span class="hljs-params">Node</span>):</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, cities</span>):</span>
        self.cities = cities
        self.stack = []

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getDist</span>(<span class="hljs-params">self, a, b</span>):</span>
        <span class="hljs-keyword">return</span> sqrt((b[<span class="hljs-number">0</span>]-a[<span class="hljs-number">0</span>])**<span class="hljs-number">2</span>+(b[<span class="hljs-number">1</span>]-a[<span class="hljs-number">1</span>])**<span class="hljs-number">2</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getEnergy</span>(<span class="hljs-params">self</span>):</span>
        dist = <span class="hljs-number">0</span>
        n = len(self.cities)
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n<span class="hljs-number">-1</span>):
            dist += self.getDist(self.cities[i], self.cities[i+<span class="hljs-number">1</span>])
        dist += self.getDist(self.cities[<span class="hljs-number">0</span>], self.cities[n<span class="hljs-number">-1</span>])
        <span class="hljs-keyword">return</span> dist

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">neighbour</span>(<span class="hljs-params">self, temp</span>):</span>
        n = len(self.cities)
        i = random.randint(<span class="hljs-number">0</span>,n<span class="hljs-number">-1</span>)
        <span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:
            j = random.randint(<span class="hljs-number">0</span>, n<span class="hljs-number">-1</span>)
            <span class="hljs-keyword">if</span> j != i:
                <span class="hljs-keyword">break</span>
        self.cities[i], self.cities[j] = self.cities[j], self.cities[i]
        self.stack.append((i,j))

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">acceptState</span>(<span class="hljs-params">self</span>):</span>
        self.stack.pop()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">prevState</span>(<span class="hljs-params">self</span>):</span>
        i,j = self.stack.pop()
        self.cities[i], self.cities[j] = self.cities[j], self.cities[i]

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">screenShot</span>(<span class="hljs-params">self</span>):</span>
        newCities = copy.deepcopy(self.cities)
        <span class="hljs-keyword">return</span> SalesmanNode(newCities)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newStartPoint</span>(<span class="hljs-params">self</span>):</span>P
        n = len(self.cities)
        cities = copy.deepcopy(self.cities)
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(n*<span class="hljs-number">10</span>):
            i = random.randint(<span class="hljs-number">0</span>,n<span class="hljs-number">-1</span>)
            <span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:
                j = random.randint(<span class="hljs-number">0</span>, n<span class="hljs-number">-1</span>)
                <span class="hljs-keyword">if</span> j != i:
                    <span class="hljs-keyword">break</span>
            cities[i], cities[j] = cities[j], cities[i]
        newNode = SalesmanNode(cities)
        <span class="hljs-keyword">return</span> newNode

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> str(self.cities)
</div></code></pre>
<p>Najciekawszym fragmentem kodu jest zmienna <em>stack</em>. Za każdym razem gdy wykonujemy zmianę miejscami dwóch miast, to wrzucamy ich indeksy na stos. W ten sposób funkcja prevState() pozwala wrócić do poprzedniego stanu bez kopiowania całej tablicy cities.</p>
<p>Stany pośrednie generujemy za pomocą zmiany miejscami dwóch miast.</p>
<h3 id="generowanie-gif">Generowanie Gif</h3>
<p>Tak wygląda kod odpowiedzialny za generowanie gifów dla zad1</p>
<pre><code class="language-Python"><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createGif</span>(<span class="hljs-params">nodes, name</span>):</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createCityGraph</span>(<span class="hljs-params">node</span>):</span>
        G = nx.Graph()
        i = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> city <span class="hljs-keyword">in</span> node.cities:
            G.add_node(i, cord = city)
            i += <span class="hljs-number">1</span>
        n = len(node.cities)
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n<span class="hljs-number">-1</span>):
            G.add_edge(i, i+<span class="hljs-number">1</span>)
        G.add_edge(<span class="hljs-number">0</span>, n<span class="hljs-number">-1</span>)
        <span class="hljs-keyword">return</span> G

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">plotCityGraph</span>(<span class="hljs-params">G, name</span>):</span>
        fig, ax = plt.subplots(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">8</span>))
        <span class="hljs-comment"># ax.set_facecolor(&#x27;#95A4AD&#x27;)</span>
        pos = nx.get_node_attributes(G, <span class="hljs-string">&quot;cord&quot;</span>)
        nx.draw_networkx(G, pos, node_size=<span class="hljs-number">14</span>, with_labels=<span class="hljs-literal">False</span>)
        plt.savefig(name)
        plt.close()

    fileNames = []
    n = len(nodes)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n):
        G = createCityGraph(nodes[i])
        plotCityGraph(G, <span class="hljs-string">f&quot;./<span class="hljs-subst">{name}</span>/<span class="hljs-subst">{i}</span>.png&quot;</span>)
        fileNames.append(<span class="hljs-string">f&quot;./<span class="hljs-subst">{name}</span>/<span class="hljs-subst">{i}</span>.png&quot;</span>)
    name = name + <span class="hljs-string">&quot;/&quot;</span> + name + <span class="hljs-string">&quot;.gif&quot;</span>
    <span class="hljs-keyword">with</span> imageio.get_writer(name, mode=<span class="hljs-string">&#x27;I&#x27;</span>) <span class="hljs-keyword">as</span> writer:
        <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> fileNames:
            image = imageio.imread(filename)
            writer.append_data(image)
</div></code></pre>
<h3 id="multiprocessing">Multiprocessing</h3>
<p>Ze względu na to, że zadanie drugie okazało się być bardzo wymagające obliczeniowo, musiałem zastosować wiele optymalizacji aby móc uzyskać satysfakcjonujące wyniki w sensownym czasie. Dlatego postanowiłem zastosować Multiprocessing, który pozwala stworzyć wiele procesów Pythona naraz. Ponieważ multiprocessing w przeciwieństwie do multithreadingu (na który Python o ile wiem zbytnio nie pozwala ze względu na GIL) nie jest w stanie w prosty sposób przekazać pamięci do procesów potomnych, implementacja tego rozwiązania jest nieco toporna, składa się ona z osobnego pliku <a href="http://zad1Multiprocessing.py">zad1Multiprocessing.py</a> oraz konstrukcji match-case w głównym pliku zadania 1. Ale najważniejsze, że działa i pozwala skrócić czas oczekiwania o 6-7 razy.</p>
<p>main(x) w zad1</p>
<pre><code class="language-Python"><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>(<span class="hljs-params">x</span>):</span>
    match x:
        case <span class="hljs-number">1</span>:
            name = <span class="hljs-string">&quot;uni&quot;</span> + str(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9000000</span>))
            os.system(<span class="hljs-string">&quot;mkdir &quot;</span>+name)

            points = generateUni(<span class="hljs-number">80</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>)
            startingNode = SalesmanNode(points)
            <span class="hljs-comment"># previewSlope(1000000,1,0.9,20000)</span>
            resArray,bestRes = runSimulations(startingNode, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, maxIteration=<span class="hljs-number">1e6</span>, timeFactor=<span class="hljs-number">30000</span>, probFactor=<span class="hljs-number">8</span>, directory=name)
            createGif(resArray, name)
        case <span class="hljs-number">2</span>:
            name = <span class="hljs-string">&quot;norm&quot;</span> + str(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9000000</span>))
            os.system(<span class="hljs-string">&quot;mkdir &quot;</span>+name)

            points = generateNorm(<span class="hljs-number">64</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>)
            startingNode = SalesmanNode(points)
            resArray,bestRes = runSimulations(startingNode, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, maxIteration=<span class="hljs-number">1e6</span>, timeFactor=<span class="hljs-number">30000</span>, probFactor=<span class="hljs-number">8</span>, directory=name)
            createGif(resArray, name)
        case <span class="hljs-number">3</span>:
            name = <span class="hljs-string">&quot;seperated&quot;</span> + str(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9000000</span>))
            os.system(<span class="hljs-string">&quot;mkdir &quot;</span>+name)

            points = generateUni(<span class="hljs-number">64</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>)
            startingNode = SalesmanNode(points)
            resArray,bestRes = runSimulations(startingNode, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, maxIteration=<span class="hljs-number">1e6</span>, timeFactor=<span class="hljs-number">30000</span>, probFactor=<span class="hljs-number">8</span>, directory=name)
            createGif(resArray, name)
</div></code></pre>
<p>zad1Multiprocessing</p>
<pre><code class="language-Python"><div><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&quot;__main__&quot;</span>:
    <span class="hljs-keyword">from</span> zad1 <span class="hljs-keyword">import</span> main
    <span class="hljs-keyword">from</span> multiprocessing <span class="hljs-keyword">import</span> *

    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>,<span class="hljs-number">4</span>):
        p = Process(target=main, args=(i,))
        p.start()
</div></code></pre>
<h2 id="wyniki-zad1">Wyniki Zad1</h2>
<p>Do uzyskania wyników użyłem następujących opcji</p>
<ul>
<li>Iterations = 10e6</li>
<li>restarts = 5</li>
<li>startingTemp = 1</li>
<li>timeFactor = 30000</li>
<li>probFactor = 8</li>
</ul>
<h3 id="unifrom-distribution">Unifrom distribution:</h3>
<p>80 Miast</p>
<p>Wykres energi i temperatury</p>
<img src="imagesZad1\uniform\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad1\uniform\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad1\uniform\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad1\uniform\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="normal-distribution">Normal distribution:</h3>
<p>64 Miasta</p>
<p>Wykres energi i temperatury</p>
<img src="imagesZad1\normal\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad1\normal\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad1\normal\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad1\normal\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="nine-spereted-areas">Nine spereted areas:</h3>
<p>64 Miasta</p>
<p>Wykres energi i temperatury</p>
<img src="imagesZad1\seperated\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad1\seperated\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad1\seperated\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad1\seperated\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="wnioski">Wnioski</h3>
<p>Jak widać algorytm wyznacza zdecydowanie krótszą trasę niż w stanie początkowym. Mimo, że nie jest to idealna trasa można uznać, że jest ona wystarczająco dobra a więc, że algorytm działa poprawnie. Widać także, że milion iteracji to zdecydowanie zbyt dużo gdyż największe spadki energi miały miejsce na samym początku trwania programu.</p>
<h2 id="zad-2">Zad 2</h2>
<h3 id="binarynode">BinaryNode</h3>
<p>Oto najbardziej skomplikowany kod w całym zadaniu.</p>
<pre><code class="language-Python"><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BinaryNode</span>(<span class="hljs-params">Node</span>):</span>
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getRadious</span>(<span class="hljs-params">self</span>):</span>
        maxi = <span class="hljs-number">-1</span>
        <span class="hljs-keyword">for</span> offset <span class="hljs-keyword">in</span> self.offsets:
            maxi = max(maxi, abs(offset[<span class="hljs-number">0</span>]))
            maxi = max(maxi, abs(offset[<span class="hljs-number">1</span>]))
        <span class="hljs-keyword">return</span> maxi

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, width, height, delta=<span class="hljs-number">0</span>, offsets=[(<span class="hljs-params"><span class="hljs-number">-1</span>,<span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">0</span>,<span class="hljs-number">1</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">1</span></span>),(<span class="hljs-params"><span class="hljs-number">-1</span>,<span class="hljs-number">-1</span></span>),(<span class="hljs-params"><span class="hljs-number">-1</span>,<span class="hljs-number">1</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">-1</span></span>)], amount=<span class="hljs-number">0.01</span>, reverseForce = False</span>):</span>
        self.width = width
        self.height = height
        self.delta = delta
        self.offsets = offsets
        self.amount = amount
        self.radious = self.getRadious()
        self.stack = []
        <span class="hljs-comment"># affectedSet - set of points affected by swap</span>
        <span class="hljs-comment"># swapSet - points to be swapped after choosing them in loop in neighbour()</span>
        self.affectedSet = set({})
        self.swapSet = set({})
        <span class="hljs-comment"># change if black points atrract or repel each other</span>
        self.reverseForce = reverseForce
        
        self.points = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(width)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(height)]

        self.numOfPoints = math.floor(width*height*delta)
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(self.numOfPoints):
            <span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:
                x = random.randint(<span class="hljs-number">0</span>,width<span class="hljs-number">-1</span>)
                y = random.randint(<span class="hljs-number">0</span>,height<span class="hljs-number">-1</span>)
                <span class="hljs-keyword">if</span> self.points[x][y] != <span class="hljs-number">0</span>:
                    <span class="hljs-keyword">continue</span>
                self.points[x][y] = <span class="hljs-number">1</span>
                <span class="hljs-keyword">break</span>

        self.oldEnergy = self.initEnergy()
        self.currEnergy = self.initEnergy()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initEnergy</span>(<span class="hljs-params">self</span>):</span>
        energy = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(self.width):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(self.height):
                energy += self.energyOfPoint(i,j)
        <span class="hljs-keyword">return</span> energy

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">energyOfPoint</span>(<span class="hljs-params">self, x, y</span>):</span>
        energy = <span class="hljs-number">0</span>
        <span class="hljs-keyword">if</span> self.points[x][y] == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> energy
        <span class="hljs-keyword">for</span> offset <span class="hljs-keyword">in</span> self.offsets:
            newX = (x + offset[<span class="hljs-number">0</span>]) % self.width
            newY = (y + offset[<span class="hljs-number">1</span>]) % self.height
            <span class="hljs-keyword">if</span> self.reverseForce == <span class="hljs-literal">False</span>:
                <span class="hljs-keyword">if</span> self.points[newX][newY] != <span class="hljs-number">0</span>:
                    energy += <span class="hljs-number">1</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">if</span> self.points[newX][newY] != <span class="hljs-number">0</span>:
                    energy -= <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> energy

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">deleteEnergy</span>(<span class="hljs-params">self</span>):</span>
        test = <span class="hljs-number">0</span>
        localSet = copy.deepcopy(self.affectedSet)
        <span class="hljs-keyword">while</span> len(localSet) != <span class="hljs-number">0</span>:
            point = localSet.pop()
            self.currEnergy -= self.energyOfPoint(point[<span class="hljs-number">0</span>], point[<span class="hljs-number">1</span>])
            test += self.energyOfPoint(point[<span class="hljs-number">0</span>], point[<span class="hljs-number">1</span>])

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">addEnergy</span>(<span class="hljs-params">self</span>):</span>
        localSet = copy.deepcopy(self.affectedSet)
        <span class="hljs-keyword">while</span> len(localSet) != <span class="hljs-number">0</span>:
            point = localSet.pop()
            self.currEnergy += self.energyOfPoint(point[<span class="hljs-number">0</span>], point[<span class="hljs-number">1</span>])


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getEnergy</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self.currEnergy

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getPointsInRadious</span>(<span class="hljs-params">self, x, y</span>):</span>
        res = []
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(-self.radious, self.radious+<span class="hljs-number">1</span>):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(-self.radious, self.radious+<span class="hljs-number">1</span>):
                newX = (x+i)%self.width
                newY = (y+j)%self.height
                res.append((newX, newY))
        <span class="hljs-keyword">return</span> res


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">addToAffectedSet</span>(<span class="hljs-params">self, vicinity</span>):</span>
        <span class="hljs-keyword">for</span> point <span class="hljs-keyword">in</span> vicinity:
            self.affectedSet.add(point)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">neighbour</span>(<span class="hljs-params">self, temp</span>):</span>
        <span class="hljs-comment"># toSwap = math.floor(self.numOfPoints*self.amount)</span>
        <span class="hljs-keyword">if</span> temp &gt; <span class="hljs-number">0.4</span>:
            toSwap = math.floor(self.numOfPoints*(<span class="hljs-number">0.02</span>))
        <span class="hljs-keyword">else</span>:
            toSwap = math.floor(self.numOfPoints*self.amount)

        self.oldEnergy = self.currEnergy
        
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(toSwap):
            x1 = random.randint(<span class="hljs-number">0</span>,self.width<span class="hljs-number">-1</span>)
            y1 = random.randint(<span class="hljs-number">0</span>,self.height<span class="hljs-number">-1</span>)
            x2 = random.randint(<span class="hljs-number">0</span>,self.width<span class="hljs-number">-1</span>)
            y2 = random.randint(<span class="hljs-number">0</span>,self.height<span class="hljs-number">-1</span>)
            pointVicinity1 = self.getPointsInRadious(x1, y1)
            pointVicinity2 = self.getPointsInRadious(x2, y2)
            self.addToAffectedSet(pointVicinity1)
            self.addToAffectedSet(pointVicinity2)
            self.swapSet.add((x1,y1,x2,y2))
        
        self.deleteEnergy()
        <span class="hljs-keyword">while</span> len(self.swapSet) != <span class="hljs-number">0</span>:
            x1,y1,x2,y2= self.swapSet.pop()
            self.points[x1][y1], self.points[x2][y2] = self.points[x2][y2], self.points[x1][y1]
            self.stack.append((x1,y1,x2,y2))

        self.addEnergy()
        self.affectedSet.clear()
        self.swapSet.clear()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">acceptState</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">while</span> self.stack != []:
            self.stack.pop()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">prevState</span>(<span class="hljs-params">self</span>):</span>
        self.currEnergy = self.oldEnergy
        <span class="hljs-keyword">while</span> self.stack != []:
            x1,y1,x2,y2 = self.stack.pop()
            self.points[x1][y1], self.points[x2][y2] = self.points[x2][y2], self.points[x1][y1]

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">screenShot</span>(<span class="hljs-params">self</span>):</span>
        matrix = np.zeros((self.height,self.width,<span class="hljs-number">3</span>), np.uint8)
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(self.width):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(self.height):
                <span class="hljs-keyword">if</span> self.points[i][j] == <span class="hljs-number">0</span>:
                    matrix[i,j] = (<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>)
                <span class="hljs-keyword">else</span>:
                    matrix[i,j] = (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> matrix

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newStartPoint</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> BinaryNode(self.width, self.height, self.delta, self.offsets, self.amount)
</div></code></pre>
<p>Jak wcześniej wspomniałem to zadanie okazało się niezywkle trudne obliczeniowo, dlatego musiałem zastosować kilka różnych optymalizacji, zrozumienie ich pozwoli na lepsze zrozumienie kodu.
Pierwszą już wcześniej opisną optymalizacją jest skorzystanie z stosu aby nie musieć przepisywać całej macierzy punktów. Drugą ważną optymalizacją jest zrezygnowanie z liczenia całej energi układu poprzez sprawdzanie sąsiedztw wszystkich punktów. Dużo lepszym rozwiązaniem jest liczenie energi dla tych punktów, których energia mogła się zmienić po wygenerowaniu nowego stanu. Do obliczenia obszaru który trzeba zbadać po zamianie dwóch punktów wykorzystuję funkcję getRadious(), która wyznacza kwadrat zawierający wszystkie punkty, których energia mogła się zmienić. I tutaj warto zauważyć, że dla małej mapy i sąsiedztwa które zawiera mało punktów ale bardzo oddalonych od komórki dla której liczymy energie, to ta optymalizacja na niewiele się zda. Można to rozwiązać tworząc drugą mape <em>offSetów</em> stworzoną w taki sposób, że interesujący nas kwadrat traktujemy jak jeden z punktów sąsiedztwa i do <em>affectedSet</em> zapisujemy centrum tego &quot;nowego&quot; sąsiędztwa. Wracając jednak do faktycznej wersji kodu to w dalszych krokach każdy punkt, który trzeba zbadać dodajemy do <em>affectedSet</em> a każdy punkt, który zamieniamy dodajemy do <em>swapSet</em>. Następnie usuwamy energie z punktów w <em>affectedSet</em>, zamieniamy punkty z <em>swapSet</em> i liczymy energie na nowo dla punktów z <em>affectedSet</em>. W ten sposób w znaczny sposób zmniejszamy ilość wywołań funkcji <em>energyOfPoint()</em>. Oczywiście możemy wrócić do poprzedniej energi oraz stanu za pomocą <em>prevState()</em>.</p>
<p>Domyślnie dla każdego czarnego punktu w sąsiedztwie innego czarnego punktu energia potencjalna rośnie. Ponieważ dążymy do znalezienia minimum, to można interpretować to zachowanie tak jakby czarne punkty się odpychały od siebie. Zachowanie to można zmienić za pomocą atrybutu reverseForce.</p>
<p>Stan sąsiedni generowany jest poprzez zamiane <em>amount</em> punktów. Jednak zauważyłem, że lepsze rezultaty otrzymuję gdy zamieniam większą ilość punktów gdy układ jest rozgrzany, dlatego dla <em>temp</em> &gt; 0.4. Zamieniam 20 razy więcej punktów.</p>
<h3 id="colornode">ColorNode</h3>
<p>Zdecydowałem się też zbadać jak zachowałby się 3 kolorowe piksele, z kwadratowym sąsiedztwem z zasadami takimi, że:</p>
<ul>
<li>Czerwone i Zielone piksele się przyciągają</li>
<li>Niebieski odpycha każdy inny piksel</li>
<li>Piksele tego samego koloru się przyciągają</li>
</ul>
<p>Do tego użyłem klasy ColorNode</p>
<pre><code class="language-Python"><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ColorNode</span>(<span class="hljs-params">BinaryNode</span>):</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, width, height, delta=<span class="hljs-number">0</span>, offsets=[(<span class="hljs-params"><span class="hljs-number">-1</span>,<span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">0</span>,<span class="hljs-number">1</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">1</span></span>),(<span class="hljs-params"><span class="hljs-number">-1</span>,<span class="hljs-number">-1</span></span>),(<span class="hljs-params"><span class="hljs-number">-1</span>,<span class="hljs-number">1</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">-1</span></span>)], amount=<span class="hljs-number">0.01</span></span>):</span>
        BinaryNode.__init__(self, width, height, delta, offsets, amount)
        
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(height):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(width):
                self.points[j][i] = <span class="hljs-number">0</span>

        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(self.numOfPoints):
            <span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:
                x = random.randint(<span class="hljs-number">0</span>,width<span class="hljs-number">-1</span>)
                y = random.randint(<span class="hljs-number">0</span>,height<span class="hljs-number">-1</span>)
                color = random.randint(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)
                <span class="hljs-keyword">if</span> self.points[x][y] != <span class="hljs-number">0</span>:
                    <span class="hljs-keyword">continue</span>
                self.points[x][y] = color
                <span class="hljs-keyword">break</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">energyOfPoint</span>(<span class="hljs-params">self, x, y</span>):</span>
        <span class="hljs-comment"># R = 0, G = 1, B = 2</span>
        energy = <span class="hljs-number">0</span>
        color = self.points[x][y]
        <span class="hljs-keyword">for</span> offset <span class="hljs-keyword">in</span> self.offsets:
            newX = (x + offset[<span class="hljs-number">0</span>]) % self.width
            newY = (y + offset[<span class="hljs-number">1</span>]) % self.height
            <span class="hljs-comment"># te same sie przyciagaja inne odpychaja</span>
            <span class="hljs-comment"># czerwony odpycha, niebieski i zielony sie przyciągają</span>
            <span class="hljs-keyword">if</span> self.points[newX][newY] == color:
                energy -= <span class="hljs-number">1</span>
            <span class="hljs-keyword">elif</span> self.points[newX][newY] == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> color == <span class="hljs-number">0</span>:
                energy += <span class="hljs-number">1</span>
            <span class="hljs-keyword">elif</span> self.points[newX][newY] == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> color == <span class="hljs-number">2</span>:
                energy -= <span class="hljs-number">1</span>
            <span class="hljs-keyword">elif</span> self.points[newX][newY] == <span class="hljs-number">2</span> <span class="hljs-keyword">and</span> color == <span class="hljs-number">1</span>:
                energy -= <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> energy

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">screenShot</span>(<span class="hljs-params">self</span>):</span>
        matrix = np.zeros((self.height,self.width,<span class="hljs-number">3</span>), np.uint8)
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(self.height):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(self.width):
                color = self.points[i][j]
                <span class="hljs-comment"># z jakiegoś powodu (0,0,255) to czerwony a nie niebieski</span>
                match color:
                    case <span class="hljs-number">0</span>:
                        matrix[i,j] = (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>)
                    case <span class="hljs-number">1</span>:
                        matrix[i,j] = (<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)
                    case <span class="hljs-number">2</span>:
                        matrix[i,j] = (<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> matrix

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newStartPoint</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> ColorNode(self.width, self.height, self.delta, self.offsets, self.amount)
</div></code></pre>
<h3 id="smoothcolornode">SmoothColorNode</h3>
<p>Ostatnią klasą jest SmoothColorNode. Składa się ona z pikseli o róznej saturacji danego koloru np. czerwone piksele z wartościami od 0 do 255 dla koloru czerwonego w RGB. Im bardziej podobne do siebie są piksele tym mocniej się przyciągają np. (255,0,0) przyciąga (200,0,0) mocniej niż (100,0,0).</p>
<pre><code class="language-Python"><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SmoothColorNode</span>(<span class="hljs-params">BinaryNode</span>):</span>
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, width, height, delta=<span class="hljs-number">0</span>, offsets=[(<span class="hljs-params"><span class="hljs-number">-1</span>,<span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">0</span>,<span class="hljs-number">1</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">1</span></span>),(<span class="hljs-params"><span class="hljs-number">-1</span>,<span class="hljs-number">-1</span></span>),(<span class="hljs-params"><span class="hljs-number">-1</span>,<span class="hljs-number">1</span></span>),(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-number">-1</span></span>)], amount=<span class="hljs-number">0.01</span>, displayColor=<span class="hljs-string">&quot;green&quot;</span></span>):</span>
        BinaryNode.__init__(self, width, height, delta, offsets, amount)
        self.displayColor = displayColor

        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(height):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(width):
                self.points[j][i] = <span class="hljs-number">0</span>

        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(self.numOfPoints):
            <span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:
                x = random.randint(<span class="hljs-number">0</span>,width<span class="hljs-number">-1</span>)
                y = random.randint(<span class="hljs-number">0</span>,height<span class="hljs-number">-1</span>)
                color = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>)
                <span class="hljs-keyword">if</span> self.points[x][y] != <span class="hljs-number">0</span>:
                    <span class="hljs-keyword">continue</span>
                self.points[x][y] = color
                <span class="hljs-keyword">break</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">energyOfPoint</span>(<span class="hljs-params">self, x, y</span>):</span>
        energy = <span class="hljs-number">0</span>
        color = self.points[x][y]
        <span class="hljs-comment"># if color == 0:</span>
        <span class="hljs-comment">#     return 0</span>
        <span class="hljs-keyword">for</span> offset <span class="hljs-keyword">in</span> self.offsets:
            newX = (x + offset[<span class="hljs-number">0</span>]) % self.width
            newY = (y + offset[<span class="hljs-number">1</span>]) % self.height
            <span class="hljs-comment"># podobne kolory się przyciągają</span>
            energy += abs(self.points[newX][newY] - color)
        <span class="hljs-keyword">return</span> energy

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">screenShot</span>(<span class="hljs-params">self</span>):</span>
        matrix = np.zeros((self.height,self.width,<span class="hljs-number">3</span>), np.uint8)
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(self.width):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(self.height):
                color = self.points[i][j]
                match self.displayColor:
                    case(<span class="hljs-string">&quot;green&quot;</span>):
                        matrix[i,j] = (<span class="hljs-number">0</span>,color,<span class="hljs-number">0</span>)
                    case(<span class="hljs-string">&quot;blue&quot;</span>):
                        matrix[i,j] = (color,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)
                    case(<span class="hljs-string">&quot;red&quot;</span>):
                        matrix[i,j] = (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,color)
        <span class="hljs-keyword">return</span> matrix

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newStartPoint</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> SmoothColorNode(self.width, self.height, self.delta, self.offsets, self.amount, displayColor=self.displayColor)
</div></code></pre>
<h3 id="tworzenie-gifów">Tworzenie Gifów</h3>
<pre><code class="language-Python"><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createGif</span>(<span class="hljs-params">nodes, name</span>):</span>
    fileNames = []
    n = len(nodes)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n):
        cv2.imwrite(<span class="hljs-string">f&quot;./<span class="hljs-subst">{name}</span>/<span class="hljs-subst">{i}</span>.png&quot;</span>, nodes[i])
        fileNames.append(<span class="hljs-string">f&quot;./<span class="hljs-subst">{name}</span>/<span class="hljs-subst">{i}</span>.png&quot;</span>)
    name = name + <span class="hljs-string">&quot;/&quot;</span> + name + <span class="hljs-string">&quot;.gif&quot;</span>
    <span class="hljs-keyword">with</span> imageio.get_writer(name, mode=<span class="hljs-string">&#x27;I&#x27;</span>) <span class="hljs-keyword">as</span> writer:
        <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> fileNames:
            image = imageio.imread(filename)
            writer.append_data(image)
</div></code></pre>
<h3 id="klasa-main">Klasa Main</h3>
<p>Tak wygląda przykładowa klasa main przygtowana na jedną z długich nocy, podczas których algorytm ciężko pracował by wygenerować ciekawe obrazy.</p>
<pre><code class="language-Python"><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>(<span class="hljs-params">x</span>):</span>
    match x:
        case(<span class="hljs-number">1</span>):
            <span class="hljs-comment"># cross</span>
            name = <span class="hljs-string">&quot;cross&quot;</span> + str(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9000000</span>))
            os.system(<span class="hljs-string">&quot;mkdir &quot;</span>+name)
            startingNode = BinaryNode(<span class="hljs-number">48</span>,<span class="hljs-number">48</span>,<span class="hljs-number">0.5</span>,amount=<span class="hljs-number">0.003</span>, offsets=[(<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>)])
            resArray, bestRes = runSimulations(startingNode, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, maxIteration=<span class="hljs-number">1000000</span>, timeFactor=<span class="hljs-number">17500</span>, probFactor=<span class="hljs-number">20</span>, directory=name)
            createGif(resArray, name)
        case(<span class="hljs-number">2</span>):
            <span class="hljs-comment"># rogi</span>
            name = <span class="hljs-string">&quot;rogi&quot;</span> + str(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9000000</span>))
            os.system(<span class="hljs-string">&quot;mkdir &quot;</span>+name)
            startingNode = BinaryNode(<span class="hljs-number">48</span>,<span class="hljs-number">48</span>,<span class="hljs-number">0.5</span>,amount=<span class="hljs-number">0.003</span>, offsets=[(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>),(<span class="hljs-number">-1</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>)])
            resArray, bestRes = runSimulations(startingNode, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, maxIteration=<span class="hljs-number">1000000</span>, timeFactor=<span class="hljs-number">17500</span>, probFactor=<span class="hljs-number">20</span>, directory=name)
            createGif(resArray, name)
        case(<span class="hljs-number">3</span>):
            <span class="hljs-comment">#skos</span>
            name = <span class="hljs-string">&quot;skos&quot;</span> + str(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9000000</span>))
            os.system(<span class="hljs-string">&quot;mkdir &quot;</span>+name)
            startingNode = BinaryNode(<span class="hljs-number">48</span>,<span class="hljs-number">48</span>,<span class="hljs-number">0.5</span>,amount=<span class="hljs-number">0.003</span>, offsets=[(<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)])
            resArray, bestRes = runSimulations(startingNode, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, maxIteration=<span class="hljs-number">1000000</span>, timeFactor=<span class="hljs-number">17500</span>, probFactor=<span class="hljs-number">20</span>, directory=name)
            createGif(resArray, name)
        case(<span class="hljs-number">4</span>):
            <span class="hljs-comment"># pierscien</span>
            name = <span class="hljs-string">&quot;pierscien&quot;</span> + str(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9000000</span>))
            os.system(<span class="hljs-string">&quot;mkdir &quot;</span>+name)
            pattern = [(<span class="hljs-number">-2</span>,<span class="hljs-number">-2</span>),(<span class="hljs-number">-1</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">-1</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">-2</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">-2</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">-2</span>),(<span class="hljs-number">-1</span>,<span class="hljs-number">-2</span>),(<span class="hljs-number">-2</span>,<span class="hljs-number">-2</span>),(<span class="hljs-number">-2</span>,<span class="hljs-number">-1</span>),(<span class="hljs-number">-2</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">-2</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">-2</span>,<span class="hljs-number">2</span>)]
            startingNode = BinaryNode(<span class="hljs-number">48</span>,<span class="hljs-number">48</span>,<span class="hljs-number">0.5</span>,amount=<span class="hljs-number">0.003</span>, offsets=pattern)
            resArray, bestRes = runSimulations(startingNode, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, maxIteration=<span class="hljs-number">1000000</span>, timeFactor=<span class="hljs-number">17500</span>, probFactor=<span class="hljs-number">20</span>, directory=name)
            createGif(resArray, name)
        case(<span class="hljs-number">5</span>):
            <span class="hljs-comment"># szachownica</span>
            name = <span class="hljs-string">&quot;szachownica&quot;</span> + str(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9000000</span>))
            os.system(<span class="hljs-string">&quot;mkdir &quot;</span>+name)
            pattern = [(<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>),(<span class="hljs-number">-1</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">-2</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">-2</span>),(<span class="hljs-number">-2</span>,<span class="hljs-number">-2</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">-2</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">-2</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)]
            startingNode = BinaryNode(<span class="hljs-number">48</span>,<span class="hljs-number">48</span>,<span class="hljs-number">0.5</span>,amount=<span class="hljs-number">0.003</span>,offsets=pattern)
            resArray, bestRes = runSimulations(startingNode, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, maxIteration=<span class="hljs-number">1000000</span>, timeFactor=<span class="hljs-number">17500</span>, probFactor=<span class="hljs-number">20</span>, directory=name)
            createGif(resArray, name)
        case(<span class="hljs-number">6</span>):
            <span class="hljs-comment"># random</span>
            name = <span class="hljs-string">&quot;random&quot;</span> + str(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">9000000</span>))
            os.system(<span class="hljs-string">&quot;mkdir &quot;</span>+name)
            pattern = [(<span class="hljs-number">2</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">-1</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">-2</span>,<span class="hljs-number">-1</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">-2</span>)]
            startingNode = BinaryNode(<span class="hljs-number">48</span>,<span class="hljs-number">48</span>,<span class="hljs-number">0.5</span>,amount=<span class="hljs-number">0.003</span>, offsets=pattern)
            resArray, bestRes = runSimulations(startingNode, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, maxIteration=<span class="hljs-number">1000000</span>, timeFactor=<span class="hljs-number">17500</span>, probFactor=<span class="hljs-number">20</span>, directory=name)
            createGif(resArray, name)
</div></code></pre>
<h2 id="wyniki-zad2">Wyniki Zad2</h2>
<p>Do uzyskania wyników użyłem następujących opcj:</p>
<ul>
<li>Iterations = 10e6</li>
<li>restarts = 5</li>
<li>startingTemp = 1</li>
<li>timeFactor = 17500</li>
<li>probFactor = 20</li>
</ul>
<h3 id="simple-square">Simple Square:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>X X X
X @ X
X X X
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\square\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\square\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\square\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\square\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<p>Jak widać dostajemy bardzo dokładny obraz z lekkimi zaburzeniami, które jednak lokalnie dalej zachowują wzór.</p>
<h3 id="cross">Cross:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>O X O
X @ X
O X O
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\cross\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\cross\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\cross\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\cross\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="horns">Horns:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>X O X
O @ O
X O X
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\horns\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\horns\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\horns\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\horns\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="checkerboard">Checkerboard:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>X O X O X
O X O X O
X O @ O X
O X O X O
X O X O X
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\Checkerboard\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\Checkerboard\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\Checkerboard\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\Checkerboard\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<p>Otrzymujemy bardzo ciekawy obraz, który ma ciekawy wzór w poziome paski o grubości 2 lub 3 piksele, paski te są jednak mocno zaburzone.</p>
<h3 id="random">Random:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>O O O O O X O
O O X O O O O
O O O O O O O
O O O @ O X O
O X O O O O O
O O O X O O O
O O O O O O O
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\randomClose\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\randomClose\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\randomClose\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\randomClose\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="ring">Ring:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>X X X X X
X O O O X
X O @ O X
X O O O X
X X X X X
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\ring\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\ring\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\ring\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\ring\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<p>Jeden z ciekawszych wzorów. Wygląda na to, że optimum to paski poziome lub pionowe, jednak w obrazie występuje zakłócenie w obrębie którego paski przyjmują inną orientacje niż w reszcie obrazka.</p>
<h3 id="skos">Skos:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>O O X
O @ O
X O O
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\skos\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\skos\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\skos\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\skos\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="big-ring">Big Ring:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>X X X X X X X X X
X O O O O O O O X
X O X X X X X O X
X O X O O O X O X
X O X O @ O X O X
X O X O O O X O X
X O X X X X X O X
X O O O O O O O X
X X X X X X X X X
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\bigRing\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\bigRing\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\bigRing\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\bigRing\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<p>Podobnie jak w przypadku pojedynczego pierścienia optimum zdają się być poziome lub pionowe paski, o róznych grubościach, zakłócenie w dolnej częsci obrazka zdaję się zmieniać kolejność pasków grubych i chudych.</p>
<h3 id="cross-with-spaces">Cross with spaces:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>O O O O X O O O O
O O O O O O O O O
O O O O X O O O O
O O O O O O O O O
X O X O @ O X O X
O O O O O O O O O
O O O O X O O O O
O O O O O O O O O
O O O O X O O O O
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\crossSpace\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\crossSpace\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\crossSpace\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\crossSpace\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="wnioski-obrazy-czarno-białe">Wnioski obrazy czarno-białe</h3>
<p>Jak widać wszystkie uzyskane wzory są bardzo wyraźne, mimo tego że posiadają zakłócenia. W większości przypadków da się na ich podstawie wywnioskować jak wyglądało by idealne minimum globalne.</p>
<p>Zakłócenia są bardzo ciekawe gdyż często można zauważyć następujący schemat:</p>
<ul>
<li>W dwóch różnych partiach obrazu powstają wzory będące bliskie minimum globalnego, rózniące się niewiele od siebie</li>
<li>Punkty wokół tych wzorów zaczynają dopasowywać się do owych kształtów</li>
<li>Gdy wszytskie punkty należą do jednej z grup (wzór pierwszy i wzór drugi) to układ jest już zbyt chłodny by móc je połączyć w jeden wzór (zniszczenie jednego z tych wzorów jest zbyt dużym skokiem energi potencjalnej aby zaakceptować ten stan, nawet jeśli prowadziło by to do lepszego rozwiązania)</li>
</ul>
<p>Z wykresów energi i temperatury widać także, że gdy układ jest &quot;rozgrzany&quot; to skoki energi potencjalnej są większe niż gdy układ jest &quot;chłodny&quot;. Pokazuje to dlaczego ten algorytm może się kojarzyć wyżarzaniem w metallurgi.</p>
<h3 id="rgb-repel">RGB Repel:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>X X X
X @ X
X X X
</div></code></code></pre>
<p>Zasady:</p>
<ul>
<li>Piksele tego samego koloru przyciągają się nawzajem</li>
<li>Piksele czerwone i zielone przyciągają się nawzajem</li>
<li>Piskele niebieskie odpychają piksele zielone i czerwone</li>
</ul>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\RGBRepel\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\RGBRepel\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\RGBRepel\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\RGBRepel\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<p>Bardzo ładnie widać, że obraz jest &quot;zawinięty&quot; na krawędziach np. wychodząc z lewej strony wchodzimy z prawej.</p>
<h3 id="green-random">Green Random:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>O O O O O X O
O O X O O O O
O O O O O O O
O O O @ O X O
O X O O O O O
O O O X O O O
O O O O O O O
</div></code></code></pre>
<p>Siła przyciągania jest tym większa im mniejsza jest róznica w wartości koloru zielonego dla piksela. Jasne piksele przyciągają się mocniej do jasnych, ciemne do ciemnych.</p>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\GreenRandom\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\GreenRandom\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\GreenRandom\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\GreenRandom\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<p>Widać zawinięcie mapy, oraz zgodnie z oczekiwaniami jasne piksele tworzą wyspy otoczone przez mniej ciemne, otoczone przez prawie czarne.</p>
<p>Poniższe obrazy mają analogiczne zasady przciągania jak ten.</p>
<h3 id="red-square">Red Square:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>X X X
X @ X
X X X
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\RedSquare\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\RedSquare\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\RedSquare\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\RedSquare\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="red-ring">Red ring:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>X X X X X
X O O O X
X O @ O X
X O O O X
X X X X X
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\RedRing\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\RedRing\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\RedRing\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\RedRing\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="red-column">Red column:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>O X O X O
O O X O O
O O @ O O
O O X O O
O X O X O
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\RedColumn\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\RedColumn\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\RedColumn\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\RedColumn\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="blue-random">Blue random:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>O O O X O O O
O O X O O O O
O O O O O O O
O O O @ O X O
O O O O O O O
O O O X O O O
O O O O O O O
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\BlueRandom\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\BlueRandom\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\BlueRandom\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\BlueRandom\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="blue-horn">Blue Horn:</h3>
<p>Sąsiedztwo:</p>
<pre><code><code><div>X O X
O @ O
X O X
</div></code></code></pre>
<p>Wykres energi i temperatury</p>
<img src="imagesZad2\BlueHorn\plot.png" alt="drawing"/>
<div class="card">
<figure>
    <img src="imagesZad2\BlueHorn\0.png" alt="drawing" width="400"/>
    <figcaption>Stan początkowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\BlueHorn\126.png" alt="drawing" width="400"/>
    <figcaption>Stan końcowy</figcaption>
</figure>
<figure>
    <img src="imagesZad2\BlueHorn\animation.gif" alt="drawing" width="400"/>
    <figcaption>GIF</figcaption>
</figure>
</div>
<h3 id="wnioski-obrazy-rgb">Wnioski obrazy RGB</h3>
<p>Obrazy zachowują się tak jak można by przewidzieć. Warto jednak zauważyć, że obrazy te zdecydowanie wolniej zbiegają do optimum dla dużej ilości pikseli zmienianych naraz, zdecydowanie bardziej opłacałoby się zwiększyć próg temperatury dla którego ilość zmienianych pikseli jest większa.</p>
<h2 id="zad3">Zad3</h2>
<p>Rozwiązywanie Sudoku</p>
<h3 id="klasa-sudoku">Klasa Sudoku</h3>
<pre><code class="language-Python"><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sudoku</span>(<span class="hljs-params">Node</span>):</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">numToInsert</span>(<span class="hljs-params">self, xOffset, yOffset</span>):</span>
        usedNum = []
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):
                x = i + <span class="hljs-number">3</span>*xOffset
                y = j + <span class="hljs-number">3</span>*yOffset
                <span class="hljs-keyword">if</span> self.points[y][x] != <span class="hljs-number">0</span>:
                    usedNum.append(self.points[y][x])
        newNum = []
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>):
            <span class="hljs-keyword">if</span> i <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> usedNum:
                newNum.append(i)
        <span class="hljs-keyword">return</span> newNum


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, points</span>):</span>
        self.n = <span class="hljs-number">9</span>
        self.points = points
        self.stack = []
        self.map = {}
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">9</span>):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">9</span>):
                <span class="hljs-keyword">if</span> self.points[i][j] != <span class="hljs-number">0</span>:
                    self.map[(i,j)] = <span class="hljs-literal">True</span>


        <span class="hljs-keyword">for</span> xOffset <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):
            <span class="hljs-keyword">for</span> yOffset <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):
                newNum = self.numToInsert(xOffset, yOffset)
                <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):
                    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):
                        x = i + <span class="hljs-number">3</span>*xOffset
                        y = j + <span class="hljs-number">3</span>*yOffset
                        <span class="hljs-keyword">if</span> self.points[y][x] == <span class="hljs-number">0</span>:
                            num = newNum.pop()
                            self.points[y][x] = num

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getEnergy</span>(<span class="hljs-params">self</span>):</span>
        res = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(self.n):
            mapa = {}
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(self.n):
                <span class="hljs-keyword">if</span> mapa.get(self.points[i][j]) == <span class="hljs-literal">None</span>:
                    mapa[self.points[i][j]] = <span class="hljs-literal">True</span>
                <span class="hljs-keyword">else</span>:
                    res += <span class="hljs-number">1</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(self.n):
            mapa = {}
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(self.n):
                <span class="hljs-keyword">if</span> mapa.get(self.points[j][i]) == <span class="hljs-literal">None</span>:
                    mapa[self.points[j][i]] = <span class="hljs-literal">True</span>
                <span class="hljs-keyword">else</span>:
                    res += <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> res

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">neighbour</span>(<span class="hljs-params">self, temp</span>):</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>):
            xOffset = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)
            yOffset = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)

            x1 = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)
            y1 = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)
            x2 = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)
            y2 = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)

            x1 = x1 + <span class="hljs-number">3</span>*xOffset
            y1 = y1 + <span class="hljs-number">3</span>*yOffset
            x2 = x2 + <span class="hljs-number">3</span>*xOffset
            y2 = y2 + <span class="hljs-number">3</span>*yOffset

            <span class="hljs-keyword">if</span> self.map.get((y1,x1)) == <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> self.map.get((y2,x2)) == <span class="hljs-literal">None</span>:
                <span class="hljs-keyword">break</span>

        self.stack.append((x1,y1,x2,y2))
        <span class="hljs-comment"># swap</span>
        self.points[y1][x1], self.points[y2][x2] = self.points[y2][x2], self.points[y1][x1]

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">acceptState</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">while</span> self.stack != []:
            self.stack.pop()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">prevState</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">while</span> self.stack != []:
            x1,y1,x2,y2 = self.stack.pop()
            self.points[y1][x1], self.points[y2][x2] = self.points[y2][x2], self.points[y1][x1]

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">screenShot</span>(<span class="hljs-params">self</span>):</span>
        newMatrix = copy.deepcopy(self.points)
        <span class="hljs-keyword">return</span> newMatrix

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newStartPoint</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printRes</span>(<span class="hljs-params">nodes</span>):</span>
    <span class="hljs-comment"># for node in nodes:</span>
    node = nodes[len(nodes)<span class="hljs-number">-1</span>]
    n = len(node)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n):
        <span class="hljs-keyword">if</span> i % <span class="hljs-number">3</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> i != <span class="hljs-number">0</span>:
            print(<span class="hljs-string">&quot;------+-------+------&quot;</span>)
        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(n):
            <span class="hljs-keyword">if</span> j % <span class="hljs-number">3</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> j != <span class="hljs-number">0</span>:
                print(<span class="hljs-string">&quot;|&quot;</span>, end=<span class="hljs-string">&quot; &quot;</span>)
            print(node[i][j], end=<span class="hljs-string">&quot; &quot;</span>)
        print()
</div></code></pre>
<p>Sposób generowania stanu sąsiedniego polega na wybraniu losowego kwadratu 3x3 i zamiany miejscami dwóch losowych liczb, nie będących liczbami ustalonymi od początku.</p>
<h2 id="wyniki-zad-3">Wyniki zad 3</h2>
<p>Wszystkie sudoku zostały wygenrowane na stronie <a href="https://sudoku.com/pl"></a>. Wszystkie sudoku są poziomu &quot;Diabelska&quot;.</p>
<p>Do obliczenia wyniku użyłem opcji</p>
<ul>
<li>Iterations = 150000</li>
<li>restarts = 20</li>
<li>startingTemp = 1</li>
<li>timeFactor = 4000</li>
<li>probFactor = 1</li>
</ul>
<h3 id="sudoku-nr-1">Sudoku nr 1</h3>
<p>Wykres:</p>
<img src="imagesZad3\sudoku1.png" alt="drawing"/>
<p>Stan początkowy:</p>
<pre><code><code><div>0 0 9 | 0 8 0 | 5 0 2 
0 0 0 | 0 0 0 | 0 0 4 
8 0 0 | 6 0 0 | 0 0 0 
------+-------+------ 
0 0 0 | 0 0 0 | 0 7 0 
0 1 0 | 0 0 3 | 0 0 0 
0 0 2 | 0 6 0 | 9 0 8 
------+-------+------ 
0 0 0 | 0 5 0 | 0 4 0 
0 0 7 | 0 0 0 | 0 6 0 
0 2 0 | 1 0 0 | 7 0 5
</div></code></code></pre>
<p>Stan końcowy:</p>
<pre><code><code><div>7 6 9 | 3 8 4 | 5 1 2
2 3 1 | 5 9 7 | 6 8 4
8 4 5 | 6 1 2 | 3 9 7
------+-------+------
6 9 4 | 8 2 5 | 1 7 3
5 1 8 | 9 7 3 | 4 2 6
3 7 2 | 4 6 1 | 9 5 8
------+-------+------
1 8 3 | 7 5 6 | 2 4 9
4 5 7 | 2 3 9 | 8 6 1
9 2 6 | 1 4 8 | 7 3 5
</div></code></code></pre>
<h3 id="sudoku-nr-2">Sudoku nr 2</h3>
<p>Stan początkowy:</p>
<img src="imagesZad3\sudoku2.png" alt="drawing"/>
<pre><code><code><div>9 0 0 | 0 0 8 | 4 0 0 
4 0 3 | 0 0 0 | 0 5 0 
0 0 0 | 0 7 9 | 2 0 0
------+-------+------
0 5 0 | 0 0 0 | 0 4 0
0 0 0 | 6 0 0 | 0 0 1
0 0 0 | 0 0 0 | 0 0 0
------+-------+------
3 0 7 | 0 0 0 | 0 2 0
1 0 0 | 0 0 6 | 0 0 0
0 0 2 | 0 4 5 | 0 8 0
</div></code></code></pre>
<p>Stan końcowy:</p>
<pre><code><code><div>7 6 9 | 3 8 4 | 5 1 2
2 3 1 | 5 9 7 | 6 8 4
8 4 5 | 6 1 2 | 3 9 7
------+-------+------
6 9 4 | 8 2 5 | 1 7 3
5 1 8 | 9 7 3 | 4 2 6
3 7 2 | 4 6 1 | 9 5 8
------+-------+------
1 8 3 | 7 5 6 | 2 4 9
4 5 7 | 2 3 9 | 8 6 1
9 2 6 | 1 4 8 | 7 3 5
</div></code></code></pre>
<h3 id="sudoku-nr-3">Sudoku nr 3</h3>
<p>Stan początkowy:</p>
<img src="imagesZad3\sudoku3.png" alt="drawing"/>
<pre><code><code><div>0 0 0 | 0 0 4 | 0 0 2 
6 0 0 | 0 0 0 | 0 0 0 
9 0 5 | 0 2 0 | 0 3 0
------+-------+------
0 0 0 | 8 0 0 | 7 0 0
2 0 3 | 0 4 0 | 0 9 0
0 1 0 | 0 0 0 | 0 0 0
------+-------+------
5 0 1 | 0 0 7 | 9 0 0
0 6 0 | 0 5 0 | 0 0 0
0 4 0 | 0 0 0 | 0 1 0
</div></code></code></pre>
<p>Stan końcowy:</p>
<pre><code><code><div>1 3 8 | 9 7 4 | 6 5 2
6 2 4 | 1 3 5 | 8 7 9
9 7 5 | 6 2 8 | 4 3 1
------+-------+------
4 9 6 | 8 1 3 | 7 2 5
2 5 3 | 7 4 6 | 1 9 8
8 1 7 | 5 9 2 | 3 6 4
------+-------+------
5 8 1 | 2 6 7 | 9 4 3
3 6 9 | 4 5 1 | 2 8 7
7 4 2 | 3 8 9 | 5 1 6
</div></code></code></pre>
<h3 id="wnioski-zad3">Wnioski Zad3</h3>
<p>Jak widać algorytm jest w stanie wygenerować dokładne rozwiązania potrzebuje on jednak dużej ilości restartów aby nie utknąć na optimum lokalnym.</p>
<h2 id="program-upscaler">Program upscaler</h2>
<p>Niestety podczas pisania programu nie wykazałem się należytą dalekowzrocznością i wszystkie obrazy, które powstały po dziesiątkach godzin obliczeń były rozmiaru 48x48 pikseli. Nie nadawały się więc na umieszczenie w raporcie gdyż byłby one po prostu nie wyraźne (tak przynajmniej skalowała te zdjęcia moja przeglądarka oraz eksplorator plików windows). Dlatego aby naprawić swój błąd stowrzyłem program <em>upscaler</em>, który jako argument przyjmuje ścieżkę do folderu z zdjęciami, następnie je powiększa i tworzy nowy plik gif.</p>

    </body>
    </html>